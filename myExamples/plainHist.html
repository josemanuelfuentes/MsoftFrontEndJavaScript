<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Continuous Line Graph Histogram</title>
<style>
  body, html {
    height: 100%;
    margin: 0;
  }
  #chart {
    width: 100%;
    height: 80%;
    position: relative;
    border-left: 2px solid black;
    border-bottom: 2px solid black;
  }
  .line {
    position: absolute;
    height: 2px;
    background-color: black;
  }
  #reset {
    margin-top: 10px;
  }
</style>
</head>
<body>
<div id="chart"></div>
<button id="reset">Reset</button>

<script>
// Dummy data stream
let data = [
{ timestamp: '1', val1: 5, val2: 8 },
{ timestamp: '2', val1: 4, val2: 7 },
{ timestamp: '3', val1: 3, val2: 6 },
{ timestamp: '4', val1: 2, val2: 5 },
{ timestamp: '5', val1: 1, val2: 4 },
{ timestamp: '6', val1: 2, val2: 5 },
{ timestamp: '7', val1: 3, val2: 6 },
{ timestamp: '8', val1: 4, val2: 7 },
{ timestamp: '9', val1: 5, val2: 8 },
{ timestamp: '10', val1: 4, val2: 9 }
];

const chart = document.getElementById('chart');
const maxValue = Math.max(...data.map(d => Math.max(d.val1, d.val2)));

// Function to draw a line between two points
function drawLine(x1, y1, x2, y2, color) {
  const line = document.createElement('div');
  line.className = 'line';
  line.style.width = `${x2 - x1}px`;
  line.style.bottom = `${y1}%`;
  line.style.left = `${x1}px`;
  line.style.backgroundColor = color;
  // Adjust line height for slope
  line.style.transformOrigin = 'bottom left';
  line.style.transform = `rotate(${Math.atan2(y2 - y1, x2 - x1)}rad)`;
  chart.appendChild(line);
}

// Function to update the continuous line graph
function updateHistogram() {
  chart.innerHTML = ''; // Clear the chart
  for (let i = 0; i < data.length - 1; i++) {
    drawLine(i * 40, (data[i].val1 / maxValue) * 100, (i + 1) * 40, (data[i + 1].val1 / maxValue) * 100, 'black');
    drawLine(i * 40, (data[i].val2 / maxValue) * 100, (i + 1) * 40, (data[i + 1].val2 / maxValue) * 100, 'red');
  }
}

// Reset button functionality
document.getElementById('reset').addEventListener('click', () => {
  data = [{ timestamp: new Date().getTime(), val1: data[data.length - 1].val1, val2: data[data.length - 1].val2 }]; // Reset data
  updateHistogram();
});

// Initial histogram render
updateHistogram();

// Function to simulate data stream and update the histogram
function simulateDataStream() {
  const timestamp = new Date().getTime();
  const val1 = Math.floor(Math.random() * 10);
  const val2 = Math.floor(Math.random() * 10);
  data.push({ timestamp, val1, val2 });
  updateHistogram();
}

// Simulate data stream every second
setInterval(simulateDataStream, 1000);

</script>
</body>
</html>
